function initEditors(){for(var e=document.getElementsByClassName("zc-editor"),t=0;t<e.length;t++)initEditor(e[t].dataset.id,e[t].dataset.singleTab)}function initEditor(e,t){"false"===t&&(t=!1);var n=initAce(e),i={js:document.getElementById("init-js"+e).value,html:n.getValue(),css:document.getElementById("init-css"+e).value};i.js=i.js.replace(/>/g,"&gt;"),i.js=i.js.replace(/</g,"&lt;"),document.getElementById("css-code"+e).innerHTML=i.css,document.getElementById("js-code"+e).innerHTML=i.js,toggle(document.getElementById("init-active"+e).value,e,t)}function initAce(e){var t="codeeditor"+e,n=document.getElementById(t),i=JSON.parse(n.dataset.settings),d=ace.edit(t);return d.setTheme("ace/theme/"+i.theme),d.getSession().setMode("ace/mode/"+i.mode),d.setReadOnly(i.readOnly),d.setOption("maxLines",i.maxLines),d}function extractDelimited(e,t,n){for(var i=e.split(t),d=1,a="",c=i[0];d<i.length;)a+=i[d].split(n)[0],c+=i[d].slice(i[d].indexOf(n)+9),d++;return{extracted:a,remaining:c}}function updateIframeCode(e){var t=ace.edit("codeeditor"+e),n={js:document.getElementById("init-js"+e).value,html:t.getValue(),css:document.getElementById("init-css"+e).value},i=extractDelimited(n.html,"<script>","<\/script>"),d="<script> window.onload= function(){"+i.extracted+n.js+"}<\/script>",a=i.remaining.split("</body>"),c=a[0].indexOf("<body>");a[0]=a[0].slice(0,c+5)+" style='margin:0px'"+a[0].slice(c+5);var l=a[0]+d+a[1];createIframe(l=(a=l.split("</head>"))[0]+"<style>"+n.css+"</style></head>"+a[1],e)}function createIframe(e,t){var n=document.getElementById("result"+t),i=document.getElementById("preview"+t);i&&n.removeChild(i);var d=n.dataset.height,a=document.createElement("iframe");a.style.width="100%",a.style.height=d,a.id="preview"+t,a.src="",a.frameBorder="0",n.appendChild(a),document.getElementById("preview"+t).contentWindow.document.write(e),document.getElementById("preview"+t).contentWindow.document.close()}function toggle(e,t,n){if("result"===e&&updateIframeCode(t),n)(a=document.getElementById(e+t)).style.display="";else for(var i=["result","html","js","css"],d=0;d<i.length;d++){var a=document.getElementById(i[d]+t),c=document.getElementById(i[d]+"-btn"+t);a.id===e+t?(a.style.display="",c.className="zc-btn active"):(c&&(c.className="zc-btn"),a.style.display="none")}}function exportToCodepen(e){var t=ace.edit("codeeditor"+e),n={js:document.getElementById("init-js"+e).value,html:t.getValue(),css:document.getElementById("init-css"+e).value};document.getElementById("codepen-data"+e).value=JSON.stringify(n),document.getElementById("codepen-form"+e).submit()}function tabSizePolyfill(){document.getElementsByTagName("code");var e=document.createElement("i");""!==e.style.tabSize&&""!==e.style.MozTabSize&&""!==e.style.oTabSize&&(ele[i].innerHTML=ele[i].innerHTML.replace(/\t/g,"  "))}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}require(["gitbook"],function(e){e.events.bind("page.change",initEditors)});