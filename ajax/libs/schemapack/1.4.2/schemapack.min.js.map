{"version":3,"sources":["schemapack.js"],"names":["addTypeAlias","newTypeName","underlyingType","everyType","Object","keys","readTypeDictStr","indexOf","TypeError","aliasTypes","getDataType","val","dataType","trim","toLowerCase","hasOwnProperty","setValidateByDefault","flag","validateByDefault","setStringEncoding","stringEncoding","requested","available","strEnc","writeVarUInt","value","wBuffer","bag","byteOffset","writeVarInt","readVarUInt","buffer","b","i","readVarInt","writeString","len","Buffer","byteLength","write","readString","str","toString","writeBuffer","length","copy","readBuffer","buff","allocUnsafe","getWriteTypeDictStr","valStr","getVarUIntByteLength","Math","floor","log","getVarIntByteLength","processArrayEnd","id","commands","stackLen","arrLenStr","repID","outerBound","undefined","jStr","getArrayLengthByteCount","encodeArrayLength","decodeArrayLength","declareDecodeRef","parentID","prop","container","declareEncodeRef","declareRepeatRefs","repItem","repEncArrStack","repDecArrStack","repByteCountStack","parentIDXN","getXN","index","throwTypeError","typeStr","min","max","schemaType","getCheckBufferStr","throwMessage","getCheckDataTypeStr","getBoundsCheckStr","validateDataType","maxFloat","Number","MAX_VALUE","encodeValue","validate","varName","decodeValue","encodeByteCount","isConstant","constantByteCounts","aStack","getCompiledSchema","schema","compileSchema","json","inArray","incID","sort","a","saveID","key","constructor","Array","isRepArrItem","push","newID","strEncodeRefDecs","strDecodeFunction","encArrayLength","decArrayLength","byteArrayLength","tmpRepEncArr","pop","tmpRepDecArr","tmpRepByteCount","strEncodeFunction","strByteCount","uniqID","concat","compiledEncode","Function","compiledDecode","build","builtSchema","encode","itemWrapper","decode","bufferWrapper","isBuffer","bufferFrom","require","boolean","int8","uint8","int16","uint16","int32","uint32","float32","float64","string","varuint","varint","dynamicByteCounts","n","from","buf","module","exports"],"mappings":"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","file":"schemapack.min.js"}